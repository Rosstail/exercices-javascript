<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>TD 3</title>
		<meta charset="UTF-8">
	</head>
	<body>
		<div id="starting">
			<textarea id="playerNickName">player</textarea>
			<button type="button" onclick="startGame()" id="launch">Lancer partie</button>
		</div>
		<div id="playerAction">
			<p>Cliquez vite !</p>
			<button type="button" onclick="playerChoice(this.id)" id="rock">Pierre</button>
			<button type="button" onclick="playerChoice(this.id)" id="paper">Papier</button>
			<button type="button" onclick="playerChoice(this.id)" id="cizails">Ciseaux</button>
			<button type="button" onclick="reLaunch()">Recommencer</button>
		</div>
		<p id="demo"></p>
	</body>
	<script>
		var Arrays = [];
		var playerNumChoice;
		var cpuNumChoice;
		var nbGame = 1;
		var round = 0;
		var timer = 3;
		var cpuTry = "X";
		var nickName = "player"

		document.getElementById("playerAction").innerHTML = "";

		function startGame() {
			if (nickName.length > 1)
				nickName = document.getElementById("playerNickName").value;
				document.getElementById("starting").innerHTML = "";
				document.getElementById("playerAction").style.visibility="visible";
		}

		function letsRock() {
			if (playerNumChoice - cpuNumChoice == 0) {
				console.log("DRAW");
				round++;
			}
			else if (playerNumChoice == -1 && cpuNumChoice == 1) {
				console.log("VICTORY");
				round++;
			}
			else if (playerNumChoice == 1 && cpuNumChoice == 0) {
				console.log("VICTORY");
				round++;
			}
			else if (playerNumChoice == 0 && cpuNumChoice == -1) {
				console.log("VICTORY");
				round++;
			}
			else {
				console.log("FAILURE");
				reLaunch();
			}
		}

		function cpuChoice() {
			if (round != 42) {
				while (cpuTry == cpuNumChoice || cpuTry === "X")
					cpuTry = Math.floor(Math.random() * Math.floor(3)) - 1; //CHANGER FORMULE
				console.log(cpuTry);
				cpuNumChoice = cpuTry;
			}
			else {
				console.log("MANCHE 42");
				if (playerNumChoice == -1)
					cpuNumChoice = 0;
				else if (playerNumChoice == 0)
					cpuNumChoice = 1;
				else
					cpuNumChoice = -1;
			}

			letsRock();
		}

		function playerChoice(clickedId) {
			if (clickedId == "rock")
				playerNumChoice = -1;
			else if (clickedId == "paper")
				playerNumChoice = 0;
			else if (clickedId == "cizails")
				playerNumChoice = 1;

			document.getElementById("demo").innerHTML = clickedId + " " + playerNumChoice;
			cpuChoice();
		}

		function reLaunch() {
			document.getElementById("demo").innerHTML = "Perdu !";
			editArray();
			round = 0;
			nbGame++;
		}

		function editArray() {
			if (Arrays.length >= 5)
				Arrays.shift();
			Arrays.push("Partie : " + nbGame + " | Pseudonyme : " + nickName + " | Manches surv√©cues : " + round + ".");
			console.log(Arrays);
		}

	</script>
</html>
